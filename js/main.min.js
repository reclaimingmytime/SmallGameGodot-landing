function nl2br(e){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}function isHidden(e){return null===e.offsetParent}function scrollToChangelog(){window.location.href="#changelogview"}function scrollToChangelogWhenReady(){$("#changelogNotice").on("shown.bs.collapse",function(e){scrollToChangelog()})}function addChangelog(){var e="https://raw.githubusercontent.com/MisterL2/SmallGameGodot/master/Releases/Changelog.txt";fetch(e).then(function(e){if(e.status<200||e.status>=400)throw new Error("Unsuccessful request.");return e.text()}).then(e=>{document.querySelector("#changelogCard").classList.add("border-info"),document.querySelector("#changelogContent").innerHTML=nl2br(sanitizeHTML(e))}).catch(n=>{document.querySelector("#changelogCard").classList.add("border-danger"),document.querySelector("#changelogContent").innerHTML='<h5 class="card-title">Error loading changelog.</h5> <a class="btn btn-primary" target="_blank" rel="nofollow noopener noreferrer" href="'+e+'">View in browser</a>'})}var sanitizeHTML=function(e){var n=document.createElement("div");return n.textContent=e,n.innerHTML};retrievedChangelog=!1,"#changelogview"==window.location.hash&&(addChangelog(),retrievedChangelog=!0,$("#changelogNotice").collapse("show"),scrollToChangelogWhenReady()),document.querySelector("#changelog").addEventListener("click",function(){retrievedChangelog||(addChangelog(),retrievedChangelog=!0),isHidden(document.querySelector("#changelogContent"))?"#changelogview"!=window.location.hash&&scrollToChangelogWhenReady():history.replaceState("",""," ")});